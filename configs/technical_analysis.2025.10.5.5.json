{
  "name": "technical_analysis.2025.10.5.5",
  "description": "",
  "config": {
    "setupMode": "setup-recommended",
    "model": {
      "modelName": "unsloth/Qwen3-1.7B",
      "customModelPath": "",
      "quantization": "q8_0",
      "family": "qwen"
    },
    "dataset": {
      "source": "upload",
      "path": "uploads/dataset_tracked_20251004_235904_sampled_train_20251004_171517.csv",
      "split": "train",
      "sample_size": 0,
      "train_split": 80,
      "max_samples": 300,
      "instruction_field": "input",
      "response_field": "output"
    },
    "template": {
      "reasoning_start": "<analysis>",
      "reasoning_end": "</analysis>",
      "solution_start": "<signal>",
      "solution_end": "</signal> ",
      "system_prompt": "You are a technical analysis expert that evaluates trading indicators and classifies market signals with precision, brevity, and structure.\n\nYour behavior is rule-bound. You must follow all instructions exactly. Failure to follow format, structure, or length limits = invalid output.\n\n---\n\nANALYSIS RULES \u2014 FOLLOW THESE EXACTLY\n\n1. Identify exactly 2\u20133 key indicators that carry the highest conviction. Do not list every indicator.\n2. Flag any OUTLIERS that contradict the main trend. If none exist, write \"None\".\n3. Synthesize a short conclusion in 2\u20133 sentences maximum summarizing direction and sentiment.\n\n---\n\nHARD CONSTRAINTS\n\nNo extra commentary, greetings, or explanations.\nNo markdown, quotes, or formatting changes beyond the required tags.\nExactly one signal value must be chosen: `STRONG_BUY`, `WEAK_BUY`, `HOLD`, `WEAK_SELL`, or `STRONG_SELL`\n\n---\n\nREQUIRED OUTPUT TEMPLATE (NO VARIATIONS ALLOWED). If your response does not follow this exact structure, label names, and ordering, it is invalid:\n\n```\n<analysis>\n[Key Indicator 1]: [Brief interpretation]\n[Key Indicator 2]: [Brief interpretation]\n[Outliers/Conflicts]: [If any]\n[Conclusion]: [1\u20132 sentence synthesis]\n</analysis>\n<signal>\nOne of: STRONG_BUY, WEAK_BUY, HOLD, WEAK_SELL, STRONG_SELL\n</signal>\n```",
      "chat_template": "{% if messages[0]['role'] == 'system' %}{{ messages[0]['content'] + eos_token }}{% set loop_messages = messages[1:] %}{% else %}{{ system_prompt + eos_token }}{% set loop_messages = messages %}{% endif %}{% for message in loop_messages %}{% if message['role'] == 'user' %}{{ message['content'] }}{% elif message['role'] == 'assistant' %}{{ message['content'] + eos_token }}{% endif %}{% endfor %}{% if add_generation_prompt %}{{ reasoning_start }}{% endif %}",
      "chat_template_type": "custom"
    },
    "algorithm": {
      "selected": "grpo",
      "epsilon": 0.0003,
      "epsilon_high": 0.0004
    },
    "training": {
      "num_epochs": 3,
      "batch_size": 8,
      "gradient_accumulation": 1,
      "learning_rate": 1e-05,
      "lr_schedule": "cosine",
      "lr_scheduler_type": "constant",
      "warmup_ratio": 0.1,
      "warmup_steps": 10,
      "weight_decay": 0.001,
      "max_grad_norm": 0.3,
      "max_sequence_length": 2048,
      "max_new_tokens": 1024,
      "seed": 42,
      "optimizer": "paged_adamw_32bit"
    },
    "grpo": {
      "num_generations": 2,
      "temperature": 0.7,
      "top_p": 0.95,
      "top_k": 50,
      "repetition_penalty": 1.01,
      "kl_weight": 0.1,
      "kl_penalty": 0.05,
      "clip_range": 0.2,
      "value_coefficient": 1
    },
    "optimizations": {
      "use_flash_attention": false,
      "gradient_checkpointing": false,
      "mixed_precision": true,
      "use_bf16": true
    },
    "output": {
      "name": "",
      "save_steps": 100,
      "eval_steps": 100,
      "logging_steps": 10
    },
    "pre_training": {
      "enabled": true,
      "epochs": 2,
      "max_samples": 150,
      "filter_by_length": false,
      "validate_format": true
    },
    "reward": {
      "type": "custom",
      "components": [
        {
          "type": "continuous",
          "name": "signal_accuracy",
          "weight": 0.85,
          "parameters": {
            "direction_match_score": 0.7,
            "valid_signals": [
              "STRONG_BUY",
              "WEAK_BUY",
              "HOLD",
              "WEAK_SELL",
              "STRONG_SELL"
            ]
          }
        },
        {
          "type": "binary",
          "name": "template_structure",
          "weight": 0.1,
          "parameters": {
            "order_matters": false,
            "required_sections": [
              "signal"
            ],
            "section_tags": [
              "signal",
              "analysis"
            ]
          }
        },
        {
          "type": "continuous",
          "name": "response_length",
          "weight": 0.05,
          "parameters": {
            "max_length": 1024,
            "min_length": 10,
            "optimal_length": null
          }
        }
      ]
    }
  },
  "timestamp": 1759672272524
}